---
// src/components/Education.astro
// Timeline vertical de formaci贸n acad茅mica con efecto de descongelamiento

interface EducationItem {
  degree: string;
  institution: string;
  period: string;
  description: string;
  achievements?: string[];
  icon?: string;
}

interface Props {
  education: EducationItem[];
}

const { 
  education = [
    {
      degree: "Grado en Ingenier铆a Inform谩tica",
      institution: "Universidad Polit茅cnica",
      period: "2018 - 2022",
      description: "Especializaci贸n en Ingenier铆a del Software y Desarrollo Web",
      achievements: [
        "Proyecto fin de grado con matr铆cula de honor",
        "Beca de excelencia acad茅mica",
        "Participaci贸n en hackathons universitarios"
      ],
      icon: ""
    },
    {
      degree: "M谩ster en Desarrollo Full Stack",
      institution: "Escuela de Tecnolog铆a Digital",
      period: "2022 - 2023",
      description: "Especializaci贸n en Spring Boot, Angular y arquitecturas modernas",
      achievements: [
        "Proyecto final: Aplicaci贸n empresarial con microservicios",
        "Certificaci贸n en AWS Cloud Practitioner"
      ],
      icon: ""
    },
    {
      degree: "Certificaciones Profesionales",
      institution: "Plataformas Online",
      period: "2023 - Presente",
      description: "Formaci贸n continua en tecnolog铆as emergentes",
      achievements: [
        "Spring Professional Certification",
        "Angular Advanced Patterns",
        "Docker & Kubernetes Fundamentals"
      ],
      icon: ""
    }
  ]
} = Astro.props;
---

<section id="education" class="relative py-20 lg:py-32 overflow-hidden">
  <!-- Decoraci贸n de fondo -->
  <div class="absolute top-0 left-1/4 w-96 h-96 bg-aurora-blue/5 rounded-full blur-3xl"></div>
  
  <div class="container mx-auto px-6 lg:px-20 relative z-10">
    <!-- T铆tulo de secci贸n -->
    <div class="text-center mb-16 reveal">
      <span class="text-aurora-cyan text-sm font-semibold tracking-wider uppercase">
        Mi Camino
      </span>
      <h2 class="text-4xl md:text-5xl font-bold mt-2 mb-4">
        <span class="text-glow">Formaci贸n Profesional</span>
      </h2>
      <div class="w-20 h-1 bg-gradient-to-r from-aurora-blue to-aurora-cyan mx-auto rounded-full"></div>
      <p class="text-winter-frost/70 mt-4 max-w-2xl mx-auto">
        Un recorrido de aprendizaje continuo y crecimiento profesional
      </p>
    </div>
    
    <!-- Timeline -->
    <div class="max-w-4xl mx-auto relative">
      <!-- L铆nea vertical central (efecto hielo congelado) -->
      <div class="absolute left-0 md:left-1/2 top-0 bottom-0 w-0.5 bg-gradient-to-b 
                  from-aurora-blue/30 via-aurora-cyan/50 to-aurora-blue/30 
                  md:-translate-x-1/2 timeline-line"></div>
      
      <!-- Items de formaci贸n -->
      <div class="space-y-12">
        {education.map((item, index) => (
          <div class={`reveal relative ${index % 2 === 0 ? 'md:pr-1/2 md:text-right' : 'md:pl-1/2 md:ml-auto'}`}
               style={`animation-delay: ${index * 0.2}s`}>
            
            <!-- Punto en la l铆nea (copo de nieve brillante) -->
            <div class={`absolute top-0 left-0 md:left-1/2 w-4 h-4 -translate-x-1/2 
                        bg-aurora-cyan rounded-full border-4 border-winter-dark 
                        shadow-[0_0_15px_rgba(100,181,246,0.8)] 
                        timeline-dot z-10`}>
              <!-- Pulso animado -->
              <div class="absolute inset-0 rounded-full bg-aurora-cyan animate-ping opacity-75"></div>
            </div>
            
            <!-- Card de contenido -->
            <div class={`ml-10 md:ml-0 ${index % 2 === 0 ? 'md:mr-12' : 'md:ml-12'}`}>
              <div class="glass-effect rounded-2xl p-6 md:p-8 frost-border 
                          hover:scale-[1.02] transition-all duration-500 
                          education-card group cursor-default">
                
                <!-- Header -->
                <div class="flex items-start gap-4 mb-4">
                  {item.icon && (
                    <div class="text-4xl group-hover:scale-110 transition-transform">
                      {item.icon}
                    </div>
                  )}
                  <div class="flex-1">
                    <div class="flex flex-wrap items-center gap-2 mb-2">
                      <span class="glass-effect px-3 py-1 rounded-full text-xs font-semibold 
                                   text-aurora-cyan border border-aurora-blue/30">
                        {item.period}
                      </span>
                    </div>
                    <h3 class="text-xl md:text-2xl font-bold text-winter-light mb-2">
                      {item.degree}
                    </h3>
                    <p class="text-aurora-cyan font-medium mb-3">
                      {item.institution}
                    </p>
                    <p class="text-winter-frost/80 leading-relaxed">
                      {item.description}
                    </p>
                  </div>
                </div>
                
                <!-- Logros -->
                {item.achievements && item.achievements.length > 0 && (
                  <div class="mt-6 pt-6 border-t border-winter-frost/10">
                    <h4 class="text-sm font-semibold text-winter-light mb-3 flex items-center gap-2">
                      <svg class="w-4 h-4 text-aurora-cyan" fill="currentColor" viewBox="0 0 20 20">
                        <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/>
                      </svg>
                      Logros destacados
                    </h4>
                    <ul class="space-y-2">
                      {item.achievements.map((achievement) => (
                        <li class="flex items-start gap-2 text-sm text-winter-frost/80">
                          <svg class="w-5 h-5 text-aurora-cyan flex-shrink-0 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
                          </svg>
                          <span>{achievement}</span>
                        </li>
                      ))}
                    </ul>
                  </div>
                )}
              </div>
            </div>
          </div>
        ))}
      </div>
    </div>
  </div>
</section>

<script>
  // Animar la l铆nea del timeline al hacer scroll
  function animateTimeline() {
    const timeline = document.querySelector('.timeline-line') as HTMLElement;
    if (!timeline) return;
    
    const timelineTop = timeline.offsetTop;
    const timelineHeight = timeline.offsetHeight;
    const scrollY = window.scrollY;
    const windowHeight = window.innerHeight;
    
    // Calcular el porcentaje de scroll visible
    const scrollProgress = Math.min(
      Math.max((scrollY + windowHeight - timelineTop) / timelineHeight, 0),
      1
    );
    
    // Aplicar gradiente progresivo
    timeline.style.background = `linear-gradient(to bottom, 
      rgba(100, 181, 246, 0.8) 0%, 
      rgba(79, 195, 247, 1) ${scrollProgress * 100}%, 
      rgba(100, 181, 246, 0.3) 100%)`;
  }
  
  // Ejecutar al hacer scroll
  window.addEventListener('scroll', animateTimeline, { passive: true });
  document.addEventListener('DOMContentLoaded', animateTimeline);
</script>

<style>
  /* Efecto de descongelamiento al hacer hover */
  .education-card {
    position: relative;
    overflow: hidden;
  }
  
  .education-card::before {
    content: '';
    position: absolute;
    top: -100%;
    left: -100%;
    width: 300%;
    height: 300%;
    background: radial-gradient(circle, rgba(100, 181, 246, 0.1) 0%, transparent 70%);
    transition: all 0.8s ease;
    pointer-events: none;
  }
  
  .education-card:hover::before {
    top: -50%;
    left: -50%;
  }
  
  /* Animaci贸n del punto en la l铆nea */
  .timeline-dot {
    animation: pulse-dot 2s ease-in-out infinite;
  }
  
  @keyframes pulse-dot {
    0%, 100% {
      box-shadow: 0 0 15px rgba(100, 181, 246, 0.8);
    }
    50% {
      box-shadow: 0 0 25px rgba(100, 181, 246, 1);
    }
  }
  
  /* Responsive adjustments */
  @media (max-width: 768px) {
    .timeline-line {
      left: 0.5rem;
    }
    
    .timeline-dot {
      left: 0.5rem;
    }
  }
</style>